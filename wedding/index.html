<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Digital Wedding</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="shortcut icon" href="../p/tema-1/assets/img/icons/rings.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Parisienne&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Handlee&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
        integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
        crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/css/splide.min.css">
    <link rel="stylesheet" href="../p/tema-1/assets/css/new-style.css">
</head>

<body>
    <div class="container-fluid">
        <!-- musik -->
        <audio id="playAudio" loop>
            <source src="assets/sound/instrument-new.mp3">
        </audio>

        <div class="audio-button">
            <button onclick="playAudio()" type="button" class="btn btn-primary btn-circle shadow" id="playButton"><i
                    class="fa fa-volume-mute"></i></button>
            <button onclick="stopAudio()" type="button" class="btn btn-danger btn-circle shadow" id="stopButton"><i
                    class="fa fa-volume-up"></i></button>
        </div>

        <div class="mobile-container" id="content">
            <div class="card-wedding" id="home-page">
                <img src="../p/tema-1/assets/img/corner.png" class="top-corner">
                <div class="frame-col">
                    <div class="frame-text">
                        <h1>Robby</h1>
                        <h2>&</h2>
                        <h1>Rizky</h1>
                    </div>
                    <img src="assets/img/frame.png" class="frame">
                </div>
                <div id="couple">
                    <div class="row">
                        <div class="col-md-12 align-self-center">
                            <div class="countdown mb-4" data-aos="fade-up">
                                <div class="text-center text-countdown" data-aos="zoom-in">
                                    <span class="time" id="day"></span> :
                                    <span class="time" id="hour"></span> :
                                    <span class="time" id="minute"></span> :
                                    <span class="time" id="second"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" data-aos="fade-up">
                        <div class="col-md-12 text-center">
                            <h4>
                                بِسْمِ اللّهِ الرَّحْمَنِ الرَّحِيْ
                            </h4>
                            <p class="m-3 text-center">
                                Assalamu'alaikum Warahmatullahi Wabarakatuh<br><br>
                                Dengan Rahmat dan Ridlo Allah SWT. Kami mengharap dengan hormat atas
                                kehadiran Bapak/Ibu/Saudara(i) pada pernikahan Putra-Putri kami
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 text-center">
                            <img src="assets/img/photo/hafidz-annur-fanany.png" width=50%" data-aos="zoom-in">
                            <div data-aos="fade-up">
                                <h3 class="couple-font">Hafidz Annur Fanany, S.Kom</h3>
                                <p>Putra dari<br>
                                    Bpk. Agus Supriyanto & Ibu. Hartini
                                </p>
                                <i class="fas fa-map-marker-alt"></i><br>
                                <small>
                                    Pucangsawit RT.04 RW.07<br>
                                    Jebres, Kota Surakarta
                                </small>
                            </div>
                        </div>
                        <h4 class="text-center mt-4 mb-4" data-aos="zoom-in" style="font-family: page-title;">Dengan
                        </h4>
                        <div class="col-12 text-center">
                            <img src="assets/img/photo/ismi-nur-aini.png" width=55%" data-aos="zoom-in">
                            <div data-aos="fade-up">
                                <h3 class="couple-font">Ismi Nur Aini, S.Kom</h3>
                                <p>Putri dari<br>
                                    Bpk. Supardi & Ibu. Waris
                                </p>
                                <i class="fas fa-map-marker-alt"></i><br>
                                <small>
                                    Ledok RT.20 RW.07<br>
                                    Karangpelem, Kedawung, Kab. Sragen
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
                <img src="assets/img/bot-corner.png" class="bot-corner">
            </div>
            <div class="card-wedding" id="event-page">
                <img src="assets/img/corner.png" class="top-corner">
                <div id="event">
                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="page-title pt-3 text-center">Acara</h3>
                            <div class="px-4 mb-2 text-center">
                                Dengan memohon rahmat dan ridho Allah SWT, izinkan kami mengundang Bapak/Ibu/Saudara(i)
                                untuk menghadiri acara ngunduh temanten pernikahan putra-putri kami
                            </div>
                            <div class="img-event">
                                <img src="assets/img/photo/hi.png" width="100%">
                            </div>
                            <div class="card mb-4 card-1 shadow-sm">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-12 text-center">
                                            <img src="assets/img/icons/rings.png" width="11%">
                                            <h3 class="mt-2">Akad Nikah</h3>
                                            Pukul 08:00 WIB <br>
                                            Sabtu, 24 Juli 2021 <br>
                                            <hr style="margin-top: 0px; margin-bottom: 0;">
                                            Ledok RT.20 RW.07 Karangpelem, Kedawung, Kab. Sragen
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-md-12 text-center">
                            <div class="card mb-4 card-1 shadow-sm" data-aos="fade-up" data-aos-offset="0">
                                <div class="card-body">
                                    <img src="assets/img/icons/love.svg" width="15%">
                                    <h3 class="mt-2">Ngunduh Temanten</h3>
                                    Pukul 10:00 WIB <br>
                                    Ahad, 25 Juli 2021 <br>
                                    <hr style="margin-top: 0px; margin-bottom: 0;">
                                    Pucangsawit RT.04 RW.07 Jebres Kota Surakarta
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 mt-2 text-center" data-aos="fade-up" data-aos-offset="0">
                            <a href="https://calendar.google.com/event?action=TEMPLATE&tmeid=N2Q4MWN1cW1tOGFicXA1Nmk0ZHJ2azNuOHUgaGFmaWR6LmJkdEBt&tmsrc=hafidz.bdt%40gmail.com"
                                target="_blank" class="btn-wedding">
                                <i class="far fa-calendar-check"></i> &nbsp; SaveTheDate
                            </a>
                        </div>
                    </div>
                </div>
                <div class="mt-1 mb-4 px-5 pb-4 text-center" data-aos="fade-up" data-aos-offset="0">
                    <span>
                        وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَاجاً لِّتَسْكُنُوا
                        إِلَيْهَا
                        وَجَعَلَ
                        بَيْنَكُم
                        مَّوَدَّةً
                        وَرَحْمَةً إِنَّ فِي ذَلِكَ لَآيَاتٍ لِّقَوْمٍ يَتَفَكَّرُونَ
                        <br>
                        <br>
                        “Dan di antara tanda-tanda kekuasaan-Nya ialah Dia menciptakan untukmu isteri-isteri
                        dari
                        jenismu
                        sendiri,
                        supaya kamu
                        cenderung dan merasa tenteram kepadanya, dan dijadikan-Nya diantaramu rasa kasih dan
                        sayang.
                        Sesungguhnya
                        pada yang
                        demikian itu benar-benar terdapat tanda-tanda bagi kaum yang berfikir”
                        <br><br>
                        <i>(QS. Ar-Ruum 30 : 21)</i>
                    </span>
                </div>
                <img src="assets/img/bot-corner.png" class="bot-corner">
            </div>
            <div class="card-wedding" id="maps-page">
                <img src="assets/img/corner.png" class="top-corner">
                <div id="maps">
                    <div class="row">
                        <div class="col-12 text-center">
                            <h3 class="page-title pt-4 pb-3">Denah</h3>
                            <div class="px-3 mb-3" data-aos="fade-up" data-aos-offset="0">
                                Merupakan suatu kehormatan dan kebahagiaan
                                bagi kami apabila Bapak/Ibu/Saudara(i)
                                berkenan hadir untuk memberikan do'a restu
                                kepada kedua mempelai.
                            </div>
                            <iframe
                                src="https://www.google.com/maps/d/u/0/embed?mid=1fWAH6649XdBu95bOmnXwzMFMmNo42edU&z=19"
                                width="100%" height="400" data-aos="fade-up" data-aos-offset="0"></iframe>
                        </div>
                    </div>
                </div>
                <img src="assets/img/bot-corner.png" class="bot-corner">
            </div>
            
            <div class="card-wedding" id="gallery-page">
                <img src="assets/img/corner.png" class="top-corner">
                <div id="gallery">
                    <div class="row">
                        <div class="col text-center">
                            <h3 class="mb-4 page-title pt-3 px-3">Galeri</h3>
                        </div>
                    </div>
                    <div class="row g-0 px-3">
                        <div class="col-6 gallery-col">
                            <img src="assets/img/photo/p-5.jpeg" class="gallery-img" onclick="onClick(this)">
                            <img src="assets/img/photo/p-4.jpeg" class="gallery-img" onclick="onClick(this)">
                            <img src="assets/img/photo/p-9.jpeg" class="gallery-img" onclick="onClick(this)">
                            <img src="assets/img/photo/p-1.jpeg" class="gallery-img" onclick="onClick(this)">
                        </div>
                        <div class=" col-6 gallery-col">
                            <img src="assets/img/photo/p-2.jpeg" class="gallery-img" onclick="onClick(this)">
                            <img src="assets/img/photo/p-8.jpeg" class="gallery-img" onclick="onClick(this)">
                            <img src="assets/img/photo/p-3.jpeg" class="gallery-img" onclick="onClick(this)">
                            <img src="assets/img/photo/p-6.jpeg" class="gallery-img" onclick="onClick(this)">
                        </div>
                    </div>
                    <p class=" text-center mt-4" data-aos="fade-up" data-aos-offset="0">
                        Atas kehadiran dan do'a restunya, kami mengucapkan terima kasih. <br><br>
                        Wassalamu'alaikum Warahmatullahi Wabarokaatuh <br><br>
                        Kami yang berbahagia <br>
                        Keluarga : <br>
                        Bp/Ibu.Agus Supriyanto/Hartini <br>
                        & <br>
                        Bp/Ibu.Supardi/Waris
                    </p>
                </div>
                <img src="assets/img/bot-corner.png" class="bot-corner">
            </div>
            <div class="menu-bottom">
                <div class="row">
                    <div class="col primary-menu" id="home-button">
                        <div class="icon-menu">
                            <img src="assets/img/icons/wedding-rings.svg" width="40%">
                        </div>
                    </div>
                    <div class="col primary-menu" id="event-button">
                        <div class="icon-menu">
                            <img src="assets/img/icons/calendar.svg" width="40%">
                        </div>
                    </div>
                    <div class="col primary-menu" id="maps-button">
                        <div class="icon-menu">
                            <img src="assets/img/icons/map.svg" width="40%">
                        </div>
                    </div>
 
                    <div class="col primary-menu" id="gallery-button">
                        <div class="icon-menu">
                            <img src="assets/img/icons/gallery.svg" width="40%">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="waiting" class="text-center">
        <img src="assets/img/loading.gif" width="20%" class="mb-3">
        <h4>Tunggu Sebentar</h4>
    </div>

    <!-- Buka Undangan Modal -->
    <div class="modal fadeInDown" id="bukaUndangan" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content mobile-container">
                <div data-aos="zoom-in">
                    <div class="row">
                        <div class="col position-absolute text-center welcome-col" style="margin-top:-40px; z-index: 2;"
                            id="title">
                            <h1 class="home-title animate__animated animate__zoomIn animate__delay-2s">The Wedding
                                of
                            </h1>
                            <h1 class="home-couple animate__animated animate__zoomIn animate__delay-2s">Robby & Rizky
                            </h1>
                            <img src="assets/img/frame.png"
                                class="welcome-img  animate__animated animate__zoomIn animate__delay-1s">
                            <h5 class="home-date animate__animated animate__zoomIn animate__delay-3s">- Ahad, 25
                                Juli
                                2021 -</h5>
                            <div class="px-4 animate__animated animate__zoomIn animate__delay-4s">
                                <div class="card shadow mt-3" style="z-index: 3;">
                                    <div class="card-body"
                                        style="font-family: p; background: url('assets/img/bg.jpg');">
                                        Kepada Yth: Bp/Ibu/Sdr/i :
                                        <h5 id="name" style="font-family: page-title;"></h5>
                                        <small>Di Tempat</small>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-wedding mt-3 mb-4 animate__animated animate__zoomIn animate__delay-5s"
                                data-dismiss="modal" id="bukaTombol" style="z-index: 3;">
                                Buka Undangan
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for full size images on click-->
    <div id="modal01" class="modal" style="padding-top:0" data-backdrop="static" onclick="this.style.display='none'">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center">
                    <img id="img01" class="w3-image" style="width: 100%;">
                    <button type="button" class="mt-2 btn-wedding close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="protokol">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <img src="assets/img/protokol.png" width="100%">
            </div>
        </div>
    </div>

    <!-- Alert  -->
    <div class=" modal fade" id="alertMsg" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="alertTitle">Modal title</h5>
                    <button type="button" class="close" id="closeButton">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="alert">

                </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="assets/js/index.js"></script>
    <script src="assets/js/countdown.js"></script>
    <script src="assets/js/audio.js"></script>
    <script src="assets/js/img.js"></script>
    <script src="assets/js/url-name.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"
        integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"
        integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG"
        crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-analytics.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/js/splide.min.js"></script>
    <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
</body>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyCjuoY1-LZxaXyy76V3NOGuGTg5RSj1G2o",
    authDomain: "rpwz-b006f.firebaseapp.com",
    databaseURL: "https://rpwz-b006f-default-rtdb.firebaseio.com",
    projectId: "rpwz-b006f",
    storageBucket: "rpwz-b006f.appspot.com",
    messagingSenderId: "26665397596",
    appId: "1:26665397596:web:ee11348cae0a668e17a599",
    measurementId: "G-Q30DWVFTT7"
  };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    const db = firebase.database()
    const blogRef = db.ref('tamu').on('value', handleSuccess, handleError)

    function listTamu() {
        let tamu = db.ref("tamu/").orderByChild("order");
        // Dapatkan referensi table
        var list_ucapan = document.getElementById("list-ucapan")

        // Memuat Data
        tamu.on("child_added", function (data, prevChildKey) {
            var datas = data.val();
            $(".list-ucapan").append(
                "<div div class='list'>" +
                "<div class='row g-0'>" +
                "<div class='col-2 text-center'>" +
                "<img src='assets/img/robot/" + datas.avatar + "' class='img-ucapan'/>" +
                "</div>" +
                "<div class='col-10'>" +
                "<h6 class='tamuNama'>" + datas.nama + "</h6>" +
                "<small class='tamuTanggal'>" + datas.tgl_kirim + "</small>" +
                "<hr style='margin:0px;'>" +
                "<p class='tamuUcapan'>" +
                datas.ucapan +
                "</p>" +
                "</div>" +
                " </div>" +
                "</div>"
            )
        });
    }

    listTamu();


    function handleSuccess(items) {
        // console.log(items.val())
    }

    function handleError(erro) {
        console.log(error)
    }

    function userId() {
        let tamus = db.ref("tamu/").limitToLast(1);
        tamus.on("child_added", function (data, prevChildKey) {
            let id = parseInt(data.key) + 1
            $("#userId").val(id)
            let order = parseInt(data.val().order) - 1
            $("#order").val(order)
        });
    }

    userId();

    function avatar() {
        let avatar = ['rb-1.png', 'rb-2.png', 'rb-3.png', 'rb-4.png']
        var rand = avatar[(Math.random() * avatar.length) | 0]
        return rand
    }

    function writeUserData(userId, nama, ucapan, date, newAvatar, order) {
        if (ucapan == "" || nama == "") {
            $("#alertTitle").html("Konfirmasi Ucapan")
            $("#alert").html("Silahkan masukan nama & ucapan terlebih dahulu.")
            $("#alertMsg").modal("show")
            // alert("Silahkan masukan ucapan terlebih dahulu.")
        } else {
            db.ref('tamu/' + userId).set({
                nama: nama,
                tgl_kirim: date,
                ucapan: ucapan,
                order: parseInt(order),
                avatar: newAvatar
            }, (error) => {
                if (error) {
                    $("#alertTitle").html("Konfirmasi Ucapan")
                    $("#alert").html("Ucapan anda gagal dikirim.")
                    $("#alertMsg").modal("show")
                } else {
                    $("#alertTitle").html("Konfirmasi Ucapan")
                    $("#alert").html(nama + ", Ucapan anda berhasil dikirim. <br> Terima Kasih atas kunjungan anda.")
                    $("#alertMsg").modal("show")
                    $("#form-ucapan").hide()
                }
            });
        }
    }


    $("#btn-submit").click(function () {
        let date = new Date();
        let y = date.getFullYear();
        let m = date.getMonth() + 1;
        let d = date.getDate();
        let h = date.getHours();
        let min = date.getMinutes();
        let s = date.getSeconds();
        let newDate = d + "/" + m + "/" + y + " - " + h + ":" + min + ":" + s

        let n = $('#namaTamu').val()
        let u = $('#ucapan').val()
        let id = $('#userId').val();
        let order = $('#order').val();
        let newAvatar = avatar()
        writeUserData(id, n, u, newDate, newAvatar, order)
    });

    $("#closeButton").click(function () {
        $("#alertMsg").modal("hide");
    })
</script>

</html>
